# Chat Log Maker 仕様書案

## 優先順位

① 高い
② 低い

## 1. 概要

Web 上で見つけた会話などを、複数人のキャラクターが会話するコメント欄形式で再現できる Web アプリケーション。作成した会話は、引用（`>`）を使った Markdown 形式でクリップボードにコピーできる。

## 2. 画面構成

画面は大きく分けて、左側の「コントロールパネル」と右側の「プレビューパネル」の 2 つで構成される。

- **コントロールパネル**: 会話のタイトルや登場人物の設定、および完成した Markdown の出力を行うエリア。
- **プレビューパネル**: 実際のコメントのやり取りを視覚的に再現し、新しいコメントの投稿や返信を行うエリア。

## 3. 機能詳細

### 3.1. コントロールパネル

#### スレッドのタイトル

- 作成する会話全体のタイトルを入力できるテキストフィールドを設置する。
- 入力された内容は、プレビューパネルのヘッダーと、エクスポートされる Markdown の H1 見出し（`#`）にリアルタイムで反映される。

#### 登場人物の設定

優先順位： `② デフォルトは最初はAとかB`

- 会話に登場する人物（話者）を管理する。
- **追加**: 「+ 登場人物を追加」ボタンを押すと、新しい話者がリストに追加される。話者の ID は A, B, C...とアルファベット順に自動で割り振られる。
- **名前の変更**: 各話者の横にあるテキストフィールドに名前を入力すると、プレビューパネルおよび Markdown 出力にその名前が反映される。名前が空の場合は、ID（A, B など）がそのまま表示名となる。
- **削除**: 各話者の横にある削除ボタンを押すと、その話者をリストから削除できる。

#### エクスポート (Markdown)

- プレビューパネルで作成された会話が、リアルタイムで Markdown 形式に変換されて表示される読み取り専用のテキストエリア。
- **Markdown をコピー**: ボタンをクリックすると、テキストエリアに表示されている Markdown 文字列全体がユーザーのクリップボードにコピーされる。コピー完了時には、画面に「コピーしました！」というフィードバックを短時間表示する。

### 3.2. プレビューパネル

#### コメントの表示

- 投稿されたコメントは、時系列で上から下に表示される。
- あるコメントへの返信は、元のコメントの下にインデント（字下げ）されてツリー構造で表示される。

#### コメントの投稿

- **トップレベルのコメント投稿**:
  - プレビューパネルの一番下に、常に新しいコメントを投稿するためのフォームが表示される。
  - このフォームには「話者選択プルダウン」「テキスト入力エリア」「投稿ボタン」が含まれる。
  - ここから投稿されたコメントは、スレッドの最上位（インデントなし）に追加される。
- **コメントへの返信**:
  - 各コメントには返信アイコンが設置されている。
  - **返信フロー**:
    1. ユーザーが返信したいコメントの「返信アイコン」をクリックする。
    2. アイコンの横に、話者を選択するためのポップアップが表示される。
    3. ユーザーがポップアップから話者を一人選択する。
    4. 選択したコメントの下に、テキスト入力エリアと投稿ボタンを持った返信フォームが表示される。
    5. テキストを入力し、「投稿」ボタンを押すと、そのコメントへの返信として投稿が追加される。

## 4. データ形式

### エクスポート形式 (Markdown)

- 会話は Markdown 形式で出力される。
- 返信は、Markdown の引用記法（`>`）をネストすることで表現する。
- 各行のフォーマットは `> {話者名}: {テキスト}` とする。

#### 出力例

```md
# 面白い書き間違い

EastyyBlogspot: My science teacher described my hand writing...

> kevinmorrice: mine was described as "an alcoholics attempt..."
>
> > ValhallaIronworks: @ValhallaIronworks Have you ever considered...
> >
> > kevinmorrice: @ValhallaIronworks or a teacher...

> seanstoyroom2021: If anyone complains about my Left Handed Writing...
```
